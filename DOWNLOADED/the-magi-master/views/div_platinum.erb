<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pryaxis | The Magi</title>
    <link rel="stylesheet" href="/css/foundation.css" />
    <script src="/js/vendor/modernizr.js"></script>
  </head>
  <body>
    
    <div class="row">
      <div class="large-12 columns">
        <h3><a href="/"><img src="/img/pryaxis.svg" style="height: 48px" /></a> <small>Pryaxis CyberPatriot 9 Projections</small></h3>
      </div>
    </div>

    <div class="row">
      <div class="large-12 columns">
        <div class="panel">
          <h4>Projection Information</h4>
          <ul>
            <li>Division: <%= division %></li>
            <li>Teams: <%= teams %></li>
            <!-- <li>Platinum Slots: <%= plat_slots == 0 ? "N/A" : plat_slots %></li> -->
            <!-- <li>Middle School Top 50% Slots: <%= mst50_slots > 0 ? mst50_slots : "N/A" %></li> -->
            <li>GR = Global rank (open vs all service), DR = Division rank, MST50 = Middle School Top 50%</li>
            <li><a href="http://uscyberpatriot.org/competition/Competition-Overview/tiers-and-advancement">Using advancement rules from CyberPatriot.</a></li>
            <li><strong>All service calculations are currently way, way, off. Advancement requires knowledge of the category, not the location.</strong></li>
            <li>Last update: <%= last_update %>. <%= (last_update > Time.now - 150) ? 'Connected to CCS.' : "Disconnected from CCS." %> </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="large-12 columns">
        <div class="panel">
          <h4>Information</h4>
          <ol>
            <li>Click on a table header to sort by that column.</li>
            <li>Projections are based on live score data, free from CyberPatriot. <strong>Does not include Cisco/networking.</strong></li>
            <li>This service is <strong>not an official CyberPatriot service and is not endorsed nor supported by CPOC.</strong> Do not inquire to CPOC about the behavior of this service.</li>
            <li>Brought to you by <a href="https://jump.software">Pryaxis Jump</a>.</li>
            <li>Did you know that Pryaxis gave <a href="https://nyx.typeform.com/to/BnhqBG">free practice images</a> out this season?</li>
            <li>Do you want to <a href="https://www.patreon.com/pryaxis">leave a tip</a>?</li>
          </ol>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="large-12 columns">
        <table style="margin-left: auto; margin-right: auto; text-align: center" id="scoreTable" class="tablesorter">
          <thead>
            <tr>
              <th>GR</th>
              <th>DR</th>
              <th>Team ID</th>
              <th>Location</th>
              <th>Tier</th>
              <th>Score</th>
              <!-- <th>Round 1</th> -->
              <!-- <th>Round 2</th> -->
              <!-- <th>Total Score</th> -->
              <!-- <th>Platinum?</th> -->
              <th>MST50?</th>
              <!-- <th>Finalist?</th> -->
              <th>Top 3 in Tier?</th>
              <th>Wildcard?</th>
            </tr>
          </thead>
          <tbody>
            <%=
              out = ""
              scores.each do |score|
                out += "<tr>"
                out += "<td>#{score.global_rank}</td>"
                out += "<td>#{score.division_rank}</td>"
                out += "<td><a href=\'http://scoreboard.uscyberpatriot.org/team.php?team=#{score.team_id}\' target='_blank'>#{score.team_id}</a> #{score.warned_multi_r3 ? '<img src=\'/img/error.png\'/>' : ''}#{score.warned_time_r3 ? '<img src=\'/img/clock.png\' />' : ''}#{score.star ? '<img src=\'/img/star.png\' />' : ''}</td>"
                out += "<td>#{score.state}</td>"
                out += "<td>#{score.tier}</td>"
                # out += "<td>#{score.r1_o_score}</td>"
                # out += "<td>#{score.r2_score}</td>"
                # out += "<td>#{score.total_score}</td>"
                out += "<td>#{score.r3_score}</td>"
                # out += "<td>#{score.platinum ? '<strong>Yes</strong>' : 'No'}</td>"
                out += "<td>#{score.mst50 ? '<strong>Yes</strong>' : 'No'}</td>"
                out += "<td>#{score.top3 ? '<strong>Yes</strong>' : 'No'}</td>"
                # out += "<td>#{score.nf ? '<strong>Yes</strong>' : 'No'}</td>"
                out += "<td>#{score.wildcard ? '<strong>Yes</strong>' : 'No'}</td>"
                out += "</tr>"
              end
              out
            %>
          </tbody>
        </table>
      </div>
    </div>

    <div class="row">
    </div>

    <div class="row">
      <div class="large-12 columns">
        <p class="text-right"><small>Powered by Jump. <a href="https://jump.software/humans.txt">Love from Littleton</a>. Need help? Email <a href="mailto:concierge@jump.software">concierge@jump.software</a>. <a href="https://twitter.com/pryaxis">Follow us on Twitter</a>.</small></p>
      </div>
    </div>
    
    <script src="/js/vendor/jquery.js"></script>
    <script src="/js/vendor/jquery.tablesorter.min.js"></script>
    <script src="/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      $(document).ready(function() 
          { 
              $("#scoreTable").tablesorter(); 
          } 
      ); 
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-47250677-2', 'auto');
      ga('send', 'pageview');

    </script>
  </body>
</html>
